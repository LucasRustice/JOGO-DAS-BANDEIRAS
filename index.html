<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desafio das Bandeiras ðŸ‡§ðŸ‡·ðŸ‡ºðŸ‡¸ðŸ‡«ðŸ‡·ðŸ‡©ðŸ‡ª</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(to right, #2c3e50, #4ca1af);
            color: #ecf0f1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            text-align: center;
        }

        .container {
            background: #34495e;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            width: 80%;
            max-width: 500px;
            transition: transform 0.3s;
        }

        .container:hover {
            transform: scale(1.02);
        }

        img {
            width: 100%;
            height: auto;
            max-width: 300px;
            border-radius: 10px;
            margin: 20px 0;
            transition: transform 0.3s;
        }

        img:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .button {
            display: block;
            margin: 10px auto;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background-color: #3498db;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
        }

        .button:hover {
            background-color: #2980b9;
            transform: scale(1.05);
        }

        .message {
            margin-top: 20px;
            font-size: 18px;
            color: #e74c3c;
        }

        .score {
            display: flex;
            justify-content: space-around;
            margin: 10px 0;
            font-size: 20px;
        }

        .score-button {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            border-radius: 10px;
            background-color: #3498db;
            color: white;
            font-size: 18px;
            transition: background-color 0.3s;
        }

        .score-button.correct {
            background-color: #2ecc71;
        }

        .score-button.incorrect {
            background-color: #e74c3c;
        }

        .timer {
            font-size: 20px;
            color: #2ecc71;
        }
    </style>
</head>
<body>
    <div class="container" id="presentation">
        <h1>ðŸ‡§ðŸ‡· Desafio das Bandeiras ðŸ‡ºðŸ‡¸ðŸ‡«ðŸ‡·ðŸ‡©ðŸ‡ª</h1>
        <p>Bem-vindo ao Desafio das Bandeiras! Neste jogo, vocÃª terÃ¡ que adivinhar a bandeira de cada paÃ­s exibido. Aqui estÃ£o as regras:</p>
        <ul>
            <li>VocÃª ganharÃ¡ se acertar 20 bandeiras.</li>
            <li>VocÃª perderÃ¡ se errar 5 bandeiras ou se o tempo acabar.</li>
        </ul>
        <button class="button" onclick="startGame()">ComeÃ§ar Jogo</button>
    </div>

    <div class="container" id="game" style="display: none;">
        <h1>ðŸ‡¬ðŸ‡§ Desafio das Bandeiras ðŸ‡¨ðŸ‡¦</h1>
        <div class="score">
            <div class="score-button correct" id="correct-score">ðŸ‡®ðŸ‡¹ Acertos: 0</div>
            <div class="score-button incorrect" id="incorrect-score">ðŸ‡ªðŸ‡¸ Erros: 0</div>
        </div>
        <div class="timer" id="timer">ðŸ‡¯ðŸ‡µ 01:00</div>
        <img id="flag" src="" alt="Bandeira">
        <div id="options"></div>
        <div class="message" id="message"></div>
    </div>

    <script>
        let correctAnswers = 0;
        let wrongAnswers = 0;
        let timer;
        let timeLeft = 60; // 1 minuto em segundos
        let usedQuestions = [];

        const questions = [
            { flag: "https://flagcdn.com/w320/br.png", answer: "Brasil" },
            { flag: "https://flagcdn.com/w320/us.png", answer: "Estados Unidos" },
            { flag: "https://flagcdn.com/w320/fr.png", answer: "FranÃ§a" },
            { flag: "https://flagcdn.com/w320/de.png", answer: "Alemanha" },
            { flag: "https://flagcdn.com/w320/it.png", answer: "ItÃ¡lia" },
            { flag: "https://flagcdn.com/w320/ar.png", answer: "Argentina" },
            { flag: "https://flagcdn.com/w320/ca.png", answer: "CanadÃ¡" },
            { flag: "https://flagcdn.com/w320/es.png", answer: "Espanha" },
            { flag: "https://flagcdn.com/w320/gb.png", answer: "Reino Unido" },
            { flag: "https://flagcdn.com/w320/au.png", answer: "AustrÃ¡lia" },
            { flag: "https://flagcdn.com/w320/jp.png", answer: "JapÃ£o" },
            { flag: "https://flagcdn.com/w320/ru.png", answer: "RÃºssia" },
            { flag: "https://flagcdn.com/w320/in.png", answer: "Ãndia" },
            { flag: "https://flagcdn.com/w320/cn.png", answer: "China" },
            { flag: "https://flagcdn.com/w320/za.png", answer: "Ãfrica do Sul" },
            { flag: "https://flagcdn.com/w320/mx.png", answer: "MÃ©xico" },
            { flag: "https://flagcdn.com/w320/kr.png", answer: "Coreia do Sul" },
            { flag: "https://flagcdn.com/w320/ng.png", answer: "NigÃ©ria" },
            { flag: "https://flagcdn.com/w320/eg.png", answer: "Egito" },
            { flag: "https://flagcdn.com/w320/sa.png", answer: "ArÃ¡bia Saudita" },
            { flag: "https://flagcdn.com/w320/tr.png", answer: "Turquia" },
            { flag: "https://flagcdn.com/w320/id.png", answer: "IndonÃ©sia" },
            { flag: "https://flagcdn.com/w320/nl.png", answer: "PaÃ­ses Baixos" },
            { flag: "https://flagcdn.com/w320/gr.png", answer: "GrÃ©cia" },
            { flag: "https://flagcdn.com/w320/se.png", answer: "SuÃ©cia" },
            { flag: "https://flagcdn.com/w320/no.png", answer: "Noruega" },
            { flag: "https://flagcdn.com/w320/ie.png", answer: "Irlanda" },
            { flag: "https://flagcdn.com/w320/ch.png", answer: "SuÃ­Ã§a" },
            { flag: "https://flagcdn.com/w320/nz.png", answer: "Nova ZelÃ¢ndia" },
            { flag: "https://flagcdn.com/w320/pt.png", answer: "Portugal" },
            { flag: "https://flagcdn.com/w320/fi.png", answer: "FinlÃ¢ndia" },
            { flag: "https://flagcdn.com/w320/dk.png", answer: "Dinamarca" },
            { flag: "https://flagcdn.com/w320/at.png", answer: "Ãustria" },
            { flag: "https://flagcdn.com/w320/be.png", answer: "BÃ©lgica" },
            { flag: "https://flagcdn.com/w320/pl.png", answer: "PolÃ´nia" },
            { flag: "https://flagcdn.com/w320/ch.png", answer: "SuÃ­Ã§a" },
            { flag: "https://flagcdn.com/w320/ua.png", answer: "UcrÃ¢nia" },
            { flag: "https://flagcdn.com/w320/ro.png", answer: "RomÃªnia" },
            { flag: "https://flagcdn.com/w320/hu.png", answer: "Hungria" },
            { flag: "https://flagcdn.com/w320/cz.png", answer: "RepÃºblica Tcheca" },
            { flag: "https://flagcdn.com/w320/bg.png", answer: "BulgÃ¡ria" },
            { flag: "https://flagcdn.com/w320/il.png", answer: "Israel" },
            { flag: "https://flagcdn.com/w320/ir.png", answer: "IrÃ£" },
            { flag: "https://flagcdn.com/w320/iq.png", answer: "Iraque" },
            { flag: "https://flagcdn.com/w320/ae.png", answer: "Emirados Ãrabes Unidos" },
            { flag: "https://flagcdn.com/w320/qa.png", answer: "Catar" },
            { flag: "https://flagcdn.com/w320/om.png", answer: "OmÃ£" },
            { flag: "https://flagcdn.com/w320/jo.png", answer: "JordÃ¢nia" },
            { flag: "https://flagcdn.com/w320/ma.png", answer: "Marrocos" },
            { flag: "https://flagcdn.com/w320/dz.png", answer: "ArgÃ©lia" },
            { flag: "https://flagcdn.com/w320/ke.png", answer: "QuÃªnia" },
            { flag: "https://flagcdn.com/w320/et.png", answer: "EtiÃ³pia" },
            { flag: "https://flagcdn.com/w320/gh.png", answer: "Gana" },
            { flag: "https://flagcdn.com/w320/ug.png", answer: "Uganda" },
            { flag: "https://flagcdn.com/w320/tn.png", answer: "TunÃ­sia" },
            { flag: "https://flagcdn.com/w320/ly.png", answer: "LÃ­bia" },
        ];

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function loadQuestion() {
            if (correctAnswers >= 20 || wrongAnswers >= 5) {
                endGame(correctAnswers >= 20);
                return;
            }

            const flagElement = document.getElementById("flag");
            const optionsElement = document.getElementById("options");
            const messageElement = document.getElementById("message");

            messageElement.textContent = "";
            updateScores();

            // Filtra perguntas que ainda nÃ£o foram usadas
            const availableQuestions = questions.filter((_, index) => !usedQuestions.includes(index));

            if (availableQuestions.length === 0) {
                messageElement.innerHTML = `<span style="color: #e74c3c;">ðŸ‡¦ðŸ‡· NÃ£o hÃ¡ mais perguntas disponÃ­veis!</span>`;
                return;
            }

            shuffleArray(availableQuestions);
            const questionIndex = questions.indexOf(availableQuestions[0]);
            usedQuestions.push(questionIndex);

            const question = questions[questionIndex];

            flagElement.src = question.flag;
            optionsElement.innerHTML = "";

            const options = shuffleArray([...questions]);
            const correctOption = options.find(option => option.answer === question.answer);
            optionsElement.appendChild(createOptionButton(correctOption.answer, true));

            let incorrectOptions = options.filter(option => option.answer !== question.answer).slice(0, 3);
            incorrectOptions.forEach(option => {
                optionsElement.appendChild(createOptionButton(option.answer, false));
            });

            shuffleArray([...optionsElement.children]).forEach(child => optionsElement.appendChild(child));

            startTimer();
        }

        function createOptionButton(optionText, isCorrect) {
            const button = document.createElement("button");
            button.className = "button";
            button.textContent = optionText;
            button.onclick = () => checkAnswer(isCorrect, button);
            return button;
        }

        function checkAnswer(isCorrect, button) {
            const messageElement = document.getElementById("message");
            const correctAnswer = questions.find(q => q.flag === document.getElementById("flag").src).answer;
            const buttons = document.querySelectorAll("#options .button");

            buttons.forEach(btn => {
                if (btn.textContent === correctAnswer) {
                    btn.style.backgroundColor = '#2ecc71'; // Verde para a resposta correta
                }
                if (!isCorrect && btn === button) {
                    btn.style.backgroundColor = '#e74c3c'; // Vermelho para a resposta errada
                }
            });

            if (isCorrect) {
                messageElement.innerHTML = `<span style="color: #2ecc71;">${getFlagEmoji(correctAnswer)} Correto!</span>`;
                correctAnswers++;
            } else {
                messageElement.innerHTML = `<span style="color: #e74c3c;">${getFlagEmoji(correctAnswer)} Errado!</span>`;
                wrongAnswers++;
            }
            
            clearInterval(timer);
            setTimeout(loadQuestion, 1000);
        }

        function getFlagEmoji(country) {
            const countryFlags = {
                "Brasil": "ðŸ‡§ðŸ‡·",
                "Estados Unidos": "ðŸ‡ºðŸ‡¸",
                "FranÃ§a": "ðŸ‡«ðŸ‡·",
                "Alemanha": "ðŸ‡©ðŸ‡ª",
                "ItÃ¡lia": "ðŸ‡®ðŸ‡¹",
                "Argentina": "ðŸ‡¦ðŸ‡·",
                "CanadÃ¡": "ðŸ‡¨ðŸ‡¦",
                "Espanha": "ðŸ‡ªðŸ‡¸",
                "Reino Unido": "ðŸ‡¬ðŸ‡§",
                "AustrÃ¡lia": "ðŸ‡¦ðŸ‡º",
                "JapÃ£o": "ðŸ‡¯ðŸ‡µ",
                "RÃºssia": "ðŸ‡·ðŸ‡º",
                "Ãndia": "ðŸ‡®ðŸ‡³",
                "China": "ðŸ‡¨ðŸ‡³",
                "Ãfrica do Sul": "ðŸ‡¿ðŸ‡¦",
                "MÃ©xico": "ðŸ‡²ðŸ‡½",
                "Coreia do Sul": "ðŸ‡°ðŸ‡·",
                "NigÃ©ria": "ðŸ‡³ðŸ‡¬",
                "Egito": "ðŸ‡ªðŸ‡¬",
                "ArÃ¡bia Saudita": "ðŸ‡¸ðŸ‡¦",
                "Turquia": "ðŸ‡¹ðŸ‡·",
                "IndonÃ©sia": "ðŸ‡®ðŸ‡©",
                "PaÃ­ses Baixos": "ðŸ‡³ðŸ‡±",
                "GrÃ©cia": "ðŸ‡¬ðŸ‡·",
                "SuÃ©cia": "ðŸ‡¸ðŸ‡ª",
                "Noruega": "ðŸ‡³ðŸ‡´",
                "Irlanda": "ðŸ‡®ðŸ‡ª",
                "SuÃ­Ã§a": "ðŸ‡¨ðŸ‡­",
                "Nova ZelÃ¢ndia": "ðŸ‡³ðŸ‡¿",
                "Portugal": "ðŸ‡µðŸ‡¹",
                "FinlÃ¢ndia": "ðŸ‡«ðŸ‡®",
                "Dinamarca": "ðŸ‡©ðŸ‡°",
                "Ãustria": "ðŸ‡¦ðŸ‡¹",
                "BÃ©lgica": "ðŸ‡§ðŸ‡ª",
                "PolÃ´nia": "ðŸ‡µðŸ‡±",
                "UcrÃ¢nia": "ðŸ‡ºðŸ‡¦",
                "RomÃªnia": "ðŸ‡·ðŸ‡´",
                "Hungria": "ðŸ‡­ðŸ‡º",
                "RepÃºblica Tcheca": "ðŸ‡¨ðŸ‡¿",
                "BulgÃ¡ria": "ðŸ‡§ðŸ‡¬",
                "Israel": "ðŸ‡®ðŸ‡±",
                "IrÃ£": "ðŸ‡®ðŸ‡·",
                "Iraque": "ðŸ‡®ðŸ‡¶",
                "Emirados Ãrabes Unidos": "ðŸ‡¦ðŸ‡ª",
                "Catar": "ðŸ‡¶ðŸ‡¦",
                "OmÃ£": "ðŸ‡´ðŸ‡²",
                "JordÃ¢nia": "ðŸ‡¯ðŸ‡´",
                "Marrocos": "ðŸ‡²ðŸ‡¦",
                "ArgÃ©lia": "ðŸ‡©ðŸ‡¿",
                "QuÃªnia": "ðŸ‡°ðŸ‡ª",
                "EtiÃ³pia": "ðŸ‡ªðŸ‡¹",
                "Gana": "ðŸ‡¬ðŸ‡­",
                "Uganda": "ðŸ‡ºðŸ‡¬",
                "TunÃ­sia": "ðŸ‡¹ðŸ‡³",
                "LÃ­bia": "ðŸ‡±ðŸ‡¾"
            };
            return countryFlags[country] || "ðŸ³ï¸";
        }

        function endGame(won) {
            const messageElement = document.getElementById("message");
            const optionsElement = document.getElementById("options");

            optionsElement.innerHTML = ''; // Limpar opÃ§Ãµes
            clearInterval(timer); // Para o cronÃ´metro

            if (won) {
                messageElement.innerHTML = `ðŸ‡°ðŸ‡· ParabÃ©ns! VocÃª acertou 20 bandeiras!`;
            } else {
                messageElement.innerHTML = `ðŸ‡¨ðŸ‡³ VocÃª perdeu!`;
            }

            const restartButton = document.createElement("button");
            restartButton.className = "button";
            restartButton.textContent = "Jogar Novamente";
            restartButton.onclick = restartGame;
            optionsElement.appendChild(restartButton);
        }

        function startTimer() {
            clearInterval(timer);
            timeLeft = 60; // Reinicia o tempo para cada questÃ£o
            const timerElement = document.getElementById("timer");
            timer = setInterval(() => {
                timeLeft--;
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timerElement.innerHTML = `ðŸ‡¸ðŸ‡¦ ${minutes < 10 ? '0' : ''}${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    wrongAnswers++;
                    messageElement.innerHTML = `<span style="color: #e74c3c;">ðŸ‡¹ðŸ‡· Tempo esgotado!</span>`;
                    setTimeout(loadQuestion, 1000);
                }
            }, 1000);
        }

        function updateScores() {
            const correctScoreElement = document.getElementById("correct-score");
            const incorrectScoreElement = document.getElementById("incorrect-score");

            correctScoreElement.innerHTML = `ðŸ‡®ðŸ‡¹ Acertos: ${correctAnswers}`;
            incorrectScoreElement.innerHTML = `ðŸ‡ªðŸ‡¸ Erros: ${wrongAnswers}`;
        }

        function restartGame() {
            correctAnswers = 0;
            wrongAnswers = 0;
            usedQuestions = [];
            document.getElementById("message").innerHTML = '';
            shuffleArray(questions); // Embaralha as perguntas para cada novo jogo
            loadQuestion();
        }

        function startGame() {
            document.getElementById("presentation").style.display = "none"; // Esconde a apresentaÃ§Ã£o
            document.getElementById("game").style.display = "block"; // Mostra o jogo
            shuffleArray(questions); // Embaralha as perguntas para cada novo jogo
            loadQuestion();
        }

        // Esconde o jogo inicialmente
        document.getElementById("game").style.display = "none";
    </script>
</body>
</html>
